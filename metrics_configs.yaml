# Prometheus Metrics Configuration
# This file defines which metrics should be enabled and their configurations

prometheus:
  multiproc_dir: "/vllm-workspace"  # Directory for Prometheus multiprocess mode

  metric_prefix: "ucm:" 
  
  # Enable/disable metrics by category
  enabled_metrics:
    counters: true
    gauges: true
    histograms: true
  
  # Counter metrics configuration
  counters:
    - name: "num_retrieve_requests"
      documentation: "Total number of retrieve requests sent to lmcache"
    - name: "num_store_requests"
      documentation: "Total number of store requests sent to lmcache"
    - name: "num_lookup_requests"
      documentation: "Total number of lookup requests sent to lmcache"
    - name: "num_requested_tokens"
      documentation: "Total number of tokens requested from lmcache"
  
  # Gauge metrics configuration
  gauges:
    - name: "retrieve_hit_rate"
      documentation: "Hit rate of lmcache retrieve requests since last log"
      multiprocess_mode: "livemostrecent"
    - name: "lookup_hit_rate"
      documentation: "Hit rate of lmcache lookup requests since last log"
      multiprocess_mode: "livemostrecent"
    - name: "local_cache_usage"
      documentation: "Local cache usage (bytes) of lmcache"
      multiprocess_mode: "sum"
  
  # Histogram metrics configuration
  histograms:
    - name: "time_to_retrieve"
      documentation: "Time to retrieve from lmcache (seconds)"
      buckets: [0.001, 0.005, 0.01, 0.02, 0.04, 0.06, 0.08, 0.1, 0.25, 0.5, 0.75, 1.0, 2.5, 5.0, 7.5, 10.0]
    - name: "time_to_store"
      documentation: "Time to store to lmcache (seconds)"
      buckets: [0.001, 0.005, 0.01, 0.02, 0.04, 0.06, 0.08, 0.1, 0.25, 0.5, 0.75, 1.0, 2.5, 5.0, 7.5, 10.0]

